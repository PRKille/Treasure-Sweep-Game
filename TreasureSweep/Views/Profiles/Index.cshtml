<div class="row">
  <div class="col-md-5 text-center">
    <h1>@Model.Name</h1>
    <img src="@Model.Img" class="img-thumbnail">
    <h4>@Model.TagLine</h4>
    <h4>User ID: @Model.ProfileId</h4>
    <h4>Wins: @ViewBag.Wins</h4>
    <h4>Losses: @ViewBag.Losses</h4>
    @Html.ActionLink("EDIT PROFILE", "Edit", "Profiles", new { id = Model.ProfileId }, new { @class="btn btn-info"})
  </div>
  <div class="col-md-7">
    <ul class="list-group">
        <li class="list-group-item text-center">
          @Html.ActionLink("ADD GAME", "Create", "Games", new {id = Model.ProfileId},new {@class="btn btn-primary"})
        </li>

        @if (Model.Games.Count > 0)
        {
          foreach (Game game in Model.Games)
          {
            //If it's your turn
            if(game.CurrentPlayer == Model.ProfileId && game.IsComplete == false)
            {
              <li class="list-group-item activeTurn">
               <span class="game-id">@Html.ActionLink($"Game ID #{game.GameId}", "Details", "Games", new { id = game.GameId})</span>
               Your Turn 
                @if(Model.ProfileId == game.P1Id)
                {
                  <span> Playing @game.P2Name </span>
                }
                else
                {
                  <span> Playing @game.P1Name </span>
                }
                 @Html.ActionLink("Game Board", "Turn", "Games", new {id = game.GameId })
              </li>
            }
            //If it's not your turn
            else if(game.CurrentPlayer != Model.ProfileId && game.IsComplete == false)
            {
              <li class="list-group-item">
                 <span class="game-id">@Html.ActionLink($"Game ID #{game.GameId}", "Details", "Games", new { id = game.GameId})</span>
                 <span class="game-state">Waiting on Opponent...</span>
                @if(Model.ProfileId == game.P1Id)
                {
                  <span class="game-playing"> Playing @game.P2Name </span>
                }
                else
                {
                  <span class="game-playing"> Playing @game.P1Name </span>
                }
                 @Html.ActionLink("Game Board", "Turn", "Games", new {id = game.GameId }, new {@class = "game-board"})
              </li>
            }
            //If you won the game
            else if(game.IsComplete == true && Model.ProfileId == game.WinningPlayer)
            {
              <li class="list-group-item game bg-light">
                <span class="game-id">@Html.ActionLink($"Game ID #{game.GameId}", "Details", "Games", new { id = game.GameId})</span>
                @if(Model.ProfileId == game.P1Id)
                {
                  <span class="game-playing"> Playing @game.P2Name </span>
                }
                else
                {
                  <span class="game-playing"> Playing @game.P1Name </span>
                }
                 @Html.ActionLink("Game Board", "Turn", "Games", new {id = game.GameId })
              </li>
              @* <img src="img/star.png" class="img-thumbnail" /> *@
            }
            //If you lost the game
            else if(game.IsComplete == true && Model.ProfileId != game.WinningPlayer)
            {
              <li class="list-group-item game bg-light">
          
                
                   <span class="game-id"> @Html.ActionLink($"Game ID #{game.GameId}", "Details", "Games", new { id = game.GameId})</span>
          

                  @if(Model.ProfileId == game.P1Id)
                  {
                    <span class="game-playing"> Playing @game.P2Name </span>
                  }
                  else
                  {
                    <span class="game-playing"> Playing @game.P1Name </span>
                  }
             
                <span class="redX">X </span>
                @Html.ActionLink("Game Board", "Turn", "Games", new {id = game.GameId })
              </li>
            }
          }
        }
    </ul>
  </div>
</div>

<script src="~/js/autoRefresh.js"></script>